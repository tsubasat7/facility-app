<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>å…­å±æ€§è¨ºæ–­ã‚¢ãƒ—ãƒªï¼ˆãƒ­ãƒ¼ãƒ€ãƒ¼ï¼‰</title>
<style>
  body { font-family: Arial, sans-serif; background:#f7f7f7; padding:20px; }
  h1 { font-size:22px; }
  .log { background:#fff; padding:15px; border-radius:8px; line-height:1.6; }
  .ok { color:green; }
  .ng { color:red; font-weight:bold; }
</style>
</head>
<body>

<h1>ğŸ” ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰çŠ¶æ³</h1>
<div class="log" id="log">èª­ã¿è¾¼ã¿é–‹å§‹...</div>

<script>
/* ------------------------
   JSON ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
------------------------ */
const files = [
  "attributes.json",
  "compatibility.json",
  "flattype_traits.json",
  "group.json",
  "meisuu.json",
  "meta.json",
  "numerology.json",
  "palmistry.json",
  "person_template.json",
  "story.json",
  "traits.json"
];

const log = (msg, cls="") => {
  const area = document.getElementById("log");
  area.innerHTML += `<div class="${cls}">${msg}</div>`;
  console.log(msg);
};

/* ------------------------
   fetch + è©³ç´°ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
------------------------ */
async function loadJSON(file) {
  const url = `/data/${file}`;  // â˜…GitHub Pageså¯¾å¿œï¼šçµ¶å¯¾ãƒ‘ã‚¹åŒ–
  try {
    const res = await fetch(url, { cache: "no-store" });

    if (!res.ok) {
      log(`âŒ ${file} â†’ HTTPã‚¨ãƒ©ãƒ¼ (${res.status})`, "ng");
      return null;
    }

    const json = await res.json();
    log(`âœ… ${file} èª­ã¿è¾¼ã¿æˆåŠŸ`, "ok");
    return json;

  } catch (err) {
    log(`âŒ ${file} â†’ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/JSON ãƒ‘ãƒ¼ã‚¹å¤±æ•—`, "ng");
    log(String(err), "ng");
    return null;
  }
}

/* ------------------------
   ã™ã¹ã¦èª­ã¿è¾¼ã‚€
------------------------ */
async function loadAll() {
  log("ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿é–‹å§‹â€¦");

  for (const f of files) {
    await loadJSON(f);
  }

  log("<hr>å®Œäº†ã€‚ä¸Šã®ãƒ­ã‚°ã«ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Œã°ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚");
}

/* ------------------------
   DOM æº–å‚™å¾Œã«é–‹å§‹
------------------------ */
if (document.readyState === "loading") {
  document.addEventListener("DOMContentLoaded", loadAll);
} else {
  loadAll();
}
</script>

</body>
</html>
